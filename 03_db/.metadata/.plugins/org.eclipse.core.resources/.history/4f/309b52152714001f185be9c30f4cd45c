-- CONNECTION: url=jdbc:mysql://localhost:3306/
-- New script in localhost 2.
-- Connection Type: dev 
-- Url: jdbc:mysql://localhost:3306/
-- workspace : C:\workspace\multi\03_db
-- Date: 2024. 5. 17.
-- Time: 오후 5:23:37

-- CONNECTION: url=jdbc:mysql://localhost:3306/
-- New script in localhost 2.
-- Connection Type: dev 
-- Url: jdbc:mysql://localhost:3306/
-- workspace : C:\workspace\multi\03_db
-- Date: 2024. 5. 7.
-- Time: 오후 6:07:05

CREATE DATABASE task;

USE task;

CREATE TABLE movie(
	id VARCHAR(20),
	title VARCHAR(20),
	content VARCHAR(100),
	actor VARCHAR(100)
);

INSERT INTO movie
	values('m1', '블랙아담', '액션', '드웨인존슨');

INSERT INTO movie
	values('m2', '리멤버', '드라마', '남주혁');
	
INSERT INTO movie
	values('m3', '자백', '스릴러', '소지섭');
	
SELECT * FROM movie;

SELECT * 
FROM movie
WHERE id = 'm1';

UPDATE movie 
SET content = '스릴러'
WHERE id = 'm1';

SELECT * 
FROM movie
WHERE id = 'm1';

DELETE FROM movie
WHERE id = 'm1';

SELECT * 
FROM movie
WHERE id = 'm1';

COMMIT;

-- 

CREATE TABLE place(
	id VARCHAR(20),
	name VARCHAR(20),
	addr VARCHAR(20),
	tel VARCHAR(20)
);

INSERT INTO place
VALUES ('p1', 'cgv', '강남구 삼성동', '02-555');

INSERT INTO place
VALUES ('p2', 'megabox', '강남구 역삼동', '02-666');

INSERT INTO place
VALUES ('p3', 'lotte', '강남구 대치동', '02-777');

SELECT * FROM place;

SELECT *
FROM place
WHERE name = 'cgv';

UPDATE place 
SET tel = '02-888'
WHERE name = 'lotte';

SELECT *
FROM place
WHERE name = 'lotte';

DELETE
FROM place
WHERE id = 'p3';

DELETE 
FROM movie;

DELETE 
FROM place;

DROP TABLE movie;

DROP TABLE place;

SELECT * FROM place;
SELECT * FROM movie;

-- 

USE task;

CREATE TABLE STUDENT(
	ID VARCHAR(20) PRIMARY KEY,
	NAME VARCHAR(20),
	TEL VARCHAR(20),
	DEPTID INT,
	PROFESSORID VARCHAR(20),
	CONSTRAINT FK_STUDENT_DEPTID FOREIGN KEY (DEPTID) REFERENCES DEPT(DEPTNO)
);

CREATE TABLE DEPT(
	DEPTNO INT PRIMARY KEY,
	DNAME VARCHAR(20),
	LOC VARCHAR(20)
);

CREATE TABLE EMP(
	EMPNO INT PRIMARY KEY,
	ENAME VARCHAR(20),
	JOB VARCHAR(20),
	MGR INT,
	HIREDATE TIMESTAMP,
	SAL INT,
	COMM INT,
	DEPTNO INT,
	CONSTRAINT FK_EMP_DEPTNO FOREIGN KEY (DEPTNO) REFERENCES DEPT(DEPTNO)
);

CREATE TABLE PROFESSOR(
	ID VARCHAR(20) PRIMARY KEY,
	NAME VARCHAR(20),
	TEL VARCHAR(20),
	DEPTID INT,
	ADDR VARCHAR(20),
	ROOMNO VARCHAR(20),
	CONSTRAINT FK_PROFESSOR_DEPTNO FOREIGN KEY (DEPTID) REFERENCES DEPT(DEPTNO)
);

CREATE TABLE DEPART(
	ID VARCHAR(20) PRIMARY KEY,
	NAME VARCHAR(20),
	INSTRUCTOR VARCHAR(20)
);

INSERT INTO DEPART
VALUES ('d1', '과목1', '김교수');

INSERT INTO DEPART
VALUES ('d2', '과목2', '이교수');

SELECT * FROM depart;

CREATE TABLE student2(
	ID VARCHAR(20) PRIMARY KEY,
	NAME VARCHAR(20) NOT null,
	TEL VARCHAR(20),
	depart_id varchar(20)
);

ALTER TABLE student2 
ADD CONSTRAINT FK_STUDENT_DEPART_ID 
FOREIGN KEY (depart_id) REFERENCES DEPART(ID);

INSERT INTO student2
VALUES ('s1', '김학생', '010-111-1111', 'd1');

INSERT INTO student2
VALUES ('s2', '이학생', '010-222-2222', 'd2');

CREATE TABLE subject(
	ID VARCHAR(20),
	title VARCHAR(20),
	depart_id varchar(20)
);

ALTER TABLE subject 
ADD CONSTRAINT PK_SUBJECT 
PRIMARY KEY (ID);
	

ALTER TABLE subject 
ADD CONSTRAINT FK_SUBJECT_DEPART_ID 
FOREIGN KEY (depart_id) REFERENCES DEPART(ID);

INSERT INTO subject
VALUES ('sub1', '수학', 'd1');

INSERT INTO subject
VALUES ('sub2', '국어', 'd2');

SELECT * FROM depart;
SELECT * FROM student2;
SELECT * FROM subject;

DROP TABLE depart;
DROP TABLE student2;
DROP TABLE subject;

-- 

USE task;

CREATE TABLE member_test(
	USER_NO INT,
	USER_ID VARCHAR(20) NOT NULL,
	USER_PWD VARCHAR(20) NOT NULL,
	PNO VARCHAR(20), 
	GENDER VARCHAR(2),
	PHONE VARCHAR(20),
	ADDRESS VARCHAR(20),
	STATUS VARCHAR(2) NOT NULL,
	CONSTRAINT MEMBER_TEST_ID_UNIQUE UNIQUE (USER_NO),
	CONSTRAINT MEMBER_TEST_PNO_UNIQUE UNIQUE (PNO),
	CONSTRAINT MEMBER_TEST_PNO_CHECK CHECK(GENDER IN ('남', '여')),
	CONSTRAINT MEMBER_TEST_PNO_STATUS CHECK(STATUS IN ('Y', 'N'))
);

SELECT * FROM member_test;

INSERT INTO member_test
VALUES (1, 'aaa', 'aaa', '991111-1111111', '남', '010-1111-1111', '서울시', 'N');

INSERT INTO member_test
VALUES (2, 'bbb', 'bbb', '991111-2111111', '여', '010-1111-2222', '서울시', 'N');

INSERT INTO member_test
VALUES (3, 'ccc', 'ccc', '981111-1111111', '남', '010-1111-3333', '서울시', 'N');

COMMIT;
